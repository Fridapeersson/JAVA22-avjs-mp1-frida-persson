{"mappings":"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","sources":["src/modules/firebase.js","src/modules/removeButtons.js","src/js/main.js"],"sourcesContent":["const highscoreListEl = document.getElementById(\"highscoreList\");\r\nexport async function getDatabase() {\r\n  const url = \"https://miniprojekt1-3dbf4-default-rtdb.europe-west1.firebasedatabase.app/highscore.json\";\r\n  const response = await fetch(url);\r\n  const data = await response.json();\r\n  console.log(data);\r\n\r\n  const highscoreList = Object.values(data);\r\n  console.log(highscoreList);\r\n  highscoreList.sort((a, b) => b.score - a.score);\r\n\r\n  const olEl = document.createElement(\"ol\");\r\n\r\n  for(let i = 0; i < highscoreList.length; i++) {\r\n    // const highscoreListObj = highscoreList[i];\r\n    // console.log(highscoreList);\r\n    const playerName = highscoreList[i].name;\r\n    const playerScore = highscoreList[i].score;\r\n    const playerNameAndPlayerScore = `${playerName} ${playerScore}`;\r\n\r\n\r\n    const liEl = document.createElement(\"li\");\r\n    liEl.textContent = playerNameAndPlayerScore;\r\n    olEl.append(liEl);\r\n    highscoreListEl.append(olEl);\r\n  }\r\n}\r\n\r\nexport async function addAndPatchHighscore(playerName, playerScore) {\r\n  const url = \"https://miniprojekt1-3dbf4-default-rtdb.europe-west1.firebasedatabase.app/highscore.json\";\r\n  const response = await fetch(url);\r\n  const data = await response.json();\r\n\r\n  let lowestScore = 999;\r\n  let lowestScoreKey = null;\r\n\r\n  for(const key in data) {\r\n    const playerObj = data[key];\r\n    console.log(playerObj);\r\n    if(playerObj.score <= lowestScore){\r\n      lowestScore = playerObj.score;\r\n      lowestScoreKey = key;\r\n    }\r\n  }\r\n  if(playerScore > lowestScore) {\r\n    const newHighscore = {\r\n      name: playerName,\r\n      score: playerScore,\r\n    };\r\n    const options = {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(newHighscore),\r\n      headers: {\r\n        \"content-type\": \"application.json; charset=UTF-8\"\r\n      }\r\n    };\r\n    const patchUrl = `https://miniprojekt1-3dbf4-default-rtdb.europe-west1.firebasedatabase.app/highscore/${lowestScoreKey}.json`;\r\n    await fetch(patchUrl, options);\r\n    getDatabase();\r\n  } else if(playerScore === lowestScore || playerScore < lowestScore) {\r\n    getDatabase();\r\n  };\r\n}\r\n","    //tar bort alternativ knapparna\r\n    export function removeButtons() {\r\n        const btns = document.querySelectorAll(\".buttonChoice\");\r\n        btns.forEach(button => button.remove());\r\n    }","import { getDatabase, addAndPatchHighscore } from \"../modules/firebase.js\";\r\nimport { removeButtons } from \"../modules/removeButtons.js\";\r\ngetDatabase();\r\nconst highscoreListEl = document.getElementById(\"highscoreList\");\r\n\r\nconst formButton = document.querySelector(\"form Button\");\r\nconst inputEl = document.querySelector(\".inputPlayerName\");\r\n\r\nformButton.addEventListener(\"click\", event =>{\r\n    event.preventDefault();\r\n    \r\n        //hämtar input värdet\r\n        const inputText = inputEl.value;\r\n        \r\n        const playerName = document.querySelector(\".playerName\");\r\n        const errorMessageEl = document.querySelector(\"#errorMessage\");\r\n        if(inputText === \"\") {\r\n            errorMessageEl.textContent = \"You need to enter your name to start the game!\"\r\n        } else {\r\n            //visar det namn användaren skriver in\r\n            playerName.textContent = `${inputText} chose: `;\r\n            playerName.append(playerText);\r\n    \r\n            //Tar bort formuläret så användaren inte kan skriva in namn igen\r\n            const removeForm = document.querySelector(\"#form\");\r\n            removeForm.remove();\r\n\r\n            playerButtonsChoice.forEach(button => button.disabled = false);\r\n        } \r\n    });\r\n\r\n    const playerText = document.querySelector(\"#playerText\");\r\n    const computerText = document.querySelector(\"#computerText\");\r\n    const resultText = document.querySelector(\"#resultText\");\r\n    const playerButtonsChoice = document.querySelectorAll(\".buttonChoice\");\r\n    // disablar sten, sax, påse knapparna tills användaren skriver in något i inputen\r\n    playerButtonsChoice.forEach(button => button.disabled = true);\r\n    let player;\r\n    let computer;\r\n    let result;\r\n    let score = 0;\r\n\r\n    //hämtar span taggarna med spelaren & datorn namn och sätter de till 0\r\n    let playerScore = document.querySelector(\".playerScore\");\r\n    // const computerScore = document.querySelector(\".computerScore\");\r\n    playerScore.innerText = 0;\r\n    // computerScore.innerText = 0;\r\n\r\n    playerButtonsChoice.forEach(button => button.addEventListener(\"click\", () => {\r\n        //få fram texten på knappen användaren trycker på (Rock, Paper, Scissors)\r\n        player = button.textContent;\r\n        playerText.innerText = `${player}`;\r\n        //funktion för datorns val\r\n        computersChoice();\r\n        //få fram texten på knappen datorns random val (Rock, Paper, Scissors)\r\n        computerText.innerText = `Computer chose: ${computer}`;\r\n        resultText.innerText = `Winner: ${checkResult()}`;\r\n    }));\r\n\r\n    //datorns val\r\n    function computersChoice() {\r\n        //random nummer 1-3\r\n        const randomNumber = Math.floor(Math.random() *playerButtonsChoice.length) +1;\r\n        // console.log(randomNumber);\r\n\r\n        if(randomNumber === 1){\r\n            computer = \"Rock\";\r\n        }\r\n        else if(randomNumber === 2) {\r\n            computer = \"Paper\";\r\n        }\r\n        else if(randomNumber === 3) {\r\n            computer = \"Scissors\";\r\n        }\r\n    } \r\n    //kolla vinnaren\r\n    function checkResult(){\r\n        if(player === computer){\r\n            result = \"It's a draw\";\r\n            //uppdaterar result\r\n            return result;\r\n        }\r\n        //Spelaren vinner\r\n        if(player === \"Rock\" && computer === \"Scissors\" || player === \"Paper\" && computer === \"Rock\" || player === \"Scissors\" && computer === \"Paper\"){\r\n            result = \"You won this round!\"\r\n            score++\r\n            playerScore.textContent = score;\r\n            return result;\r\n        }\r\n        //Datorn vinner\r\n        if(computer === \"Rock\" && player === \"Paper\" || computer === \"Paper\" && player === \"Rock\" || computer === \"Scissors\" && player === \"Paper\" || computer === \"Rock\" && player === \"Scissors\"){\r\n            result = \"You lost, try again!\";\r\n                //Tar bort knappar när datorn vinner\r\n                removeButtons();\r\n                addAndPatchHighscore(inputEl.value, score);\r\n                highscoreListEl.textContent = \"\";\r\n            }\r\n            return result;\r\n        }\r\n    const playAgain = document.querySelector(\"#playAgain\");\r\n    //starta om spelet\r\n    playAgain.addEventListener(\"click\", function(){\r\n        window.location.reload();\r\n    });\r\n\r\n\r\n   "],"names":["$9b34a98e8268116b$var$highscoreListEl","document","getElementById","async","$9b34a98e8268116b$export$d0dd861204d0bf72","response","fetch","data","json","console","log","highscoreList","Object","values","sort","a","b","score","olEl","createElement","i","length","playerNameAndPlayerScore","name","liEl","textContent","append","$9b34a98e8268116b$export$80b4ce4b298c825f","playerName","playerScore","lowestScore","lowestScoreKey","key","playerObj","newHighscore","options","method","body","JSON","stringify","headers","patchUrl","$82d0123d79249300$export$89b63b8e1a13d490","querySelectorAll","forEach","button","remove","$54b47fc030b7b21e$var$highscoreListEl","$54b47fc030b7b21e$var$formButton","querySelector","$54b47fc030b7b21e$var$inputEl","addEventListener","event","preventDefault","inputText","value","errorMessageEl","$54b47fc030b7b21e$var$playerText","$54b47fc030b7b21e$var$playerButtonsChoice","disabled","$54b47fc030b7b21e$var$computerText","$54b47fc030b7b21e$var$resultText","$54b47fc030b7b21e$var$player","$54b47fc030b7b21e$var$computer","$54b47fc030b7b21e$var$result","$54b47fc030b7b21e$var$score","$54b47fc030b7b21e$var$playerScore","innerText","randomNumber","Math","floor","random","$54b47fc030b7b21e$var$computersChoice","$54b47fc030b7b21e$var$checkResult","window","location","reload"],"version":3,"file":"index.2f9658ae.js.map"}